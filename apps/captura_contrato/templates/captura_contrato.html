{% load static %}
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPIF | Captura Contratos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="{% static 'img/Logo.png' %}">
    <link rel="stylesheet" href="{% static 'css/captura_contrato.css' %}">
</head>

<body>
    <!--Notificación de ambas tamblas (Contrato/Proveedor)-->
    <div id="notification" class="notification"></div>
    <!--Componente Toggle (Pestaña)-->
    <div class="toggle-tab">
        <button class="toggle-tab-btn" aria-label="Toggle menu">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>

    <!--Barra lateral (Menú Izquierdo)-->
    <div class="sidebar">
        <div class="sidebar-header">
            <h2>Menú Principal</h2>
        </div>
        <div class="sidebar-menu">
            <ul>
                <li class="has-submenu">
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-scroll"></i> Contratos
                        <i class="fas fa-chevron-down arrow"></i>
                    </a>
                    <ul class="submenu">
                        <li class="has-submenu">
                            <a href="#" class="submenu-toggle-2">Archivo
                                <i class="fas fa-chevron-right arrow-2"></i>
                            </a>
                            <ul class="submenu-2">
                                <li><a href="{% url 'captura_contrato' %}">Captura</a></li>
                                <li><a href="#">Adiciones</a></li>
                            </ul>
                        </li>
                        <li class="has-submenu">
                            <a href="#" class="submenu-toggle-2">Reportes
                                <i class="fas fa-chevron-right arrow-2"></i>
                            </a>
                            <ul class="submenu-2">
                                <li><a href="#">General</a></li>
                                <li><a href="#">Adiciones</a></li>
                                <li><a href="#">Pagado</a></li>
                                <li><a href="#">Pagado por Cuenta</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="has-submenu">
                    <a href="#" class="submenu-toggle">
                        <i class="fas fa-handshake"></i> Oficios
                        <i class="fas fa-chevron-down arrow"></i>
                    </a>
                    <ul class="submenu">
                        <li class="has-submenu">
                            <a href="#" class="submenu-toggle-2">Archivo
                                <i class="fas fa-chevron-right arrow-2"></i>
                            </a>
                            <ul class="submenu-2">
                                <li><a href="#">Oficios de Aprobación</a></li>
                                <li><a href="#">Obras</a></li>
                                <li><a href="#">Selección de Pago</a></li>
                                <li><a href="#">Estimaciones</a></li>
                                <li><a href="#">Recursos FISM</a></li>
                                <li><a href="#">Enviar Estimaciones</a></li>
                                <li><a href="#">Cheques</a></li>
                                <li><a href="#">Pagos</a></li>
                            </ul>
                        </li>
                        <li class="has-submenu">
                            <a href="#" class="submenu-toggle-2">Consultar
                                <i class="fas fa-chevron-right arrow-2"></i>
                            </a>
                            <ul class="submenu-2">
                                <li><a href="#">Estimaciones Enviadas</a></li>
                                <li><a href="#">Formatos</a></li>
                            </ul>
                        </li>
                        <li class="has-submenu">
                            <a href="#" class="submenu-toggle-2">Reportes
                                <i class="fas fa-chevron-right arrow-2"></i>
                            </a>
                            <ul class="submenu-2">
                                <li><a href="#">Analisis Financiero</a></li>
                                <li><a href="#">Pagos x Contrato</a></li>
                                <li><a href="#">Contado x Recurso</a></li>
                                <li><a href="#">Pagos x Obra</a></li>
                                <li><a href="#">Pagos x Proveedor</a></li>
                                <li><a href="#">Por Cuenta</a></li>
                                <li><a href="#">Por Proyecto</a></li>
                                <li><a href="#">Oficios</a></li>
                                <li><a href="#">Ptt vs Oficios</a></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="sidebar-footer">
            <a href="{% url 'logout' %}" class="logout-btn">
                <i class="fas fa-sign-out-alt"></i> Cerrar Sesión
            </a>
        </div>
    </div>

    <!--Menú Derecha-->
    <div class="right-menu">
        <div class="right-menu-header">
            <h2>Funciones</h2>
        </div>
        <div class="right-menu-content">
            <button type="button" class="menu-btn" id="btnAgregar">
                <i class="fas fa-plus"></i><span>Crear</span>
            </button>
            <button class="menu-btn" id="btnActualizar">
                <i class="fas fa-layer-group"></i><span>Actualizar</span></button>
            </button>
            <button class="menu-btn" id="btnImprimir">
                <i class="fas fa-print"></i><span>Imprimir</span>
            </button>
            <button href="{% url 'obtener_proveedores' %}" class="menu-btn" id="btnProveedores">
                <i class="fas fa-truck"></i><span>Proveedores</span>
            </button>
            <button class="menu-btn" id="btnAdiciones">
                <i class="fas fa-comment-dollar"></i><span>Adiciones</span>
            </button>
            <a href="{% url 'main' %}" class="menu-btn">
                <i class="fas fa-right-to-bracket"></i><span>Salir</span>
            </a>
        </div>
        <div class="right-menu-footer">
            <img src="{% static 'img/Gobierno.png' %}" alt="Logo SPIF" class="logo-footer">
        </div>
    </div>

    <!--Contenido Principal-->
    <div class="main-content">
        <div class="header">
            <h1 class="page-title">Sistema de Procesamiento de Información Financiera</h1>
            <div class="user-info">
                {% if user.is_authenticated %}
                <span>¡Bienvenido, {{ user.username }}!</span>
                {% endif %}
            </div>
        </div>

        <!--Input de Contenido Principal-->
        <div class="container">
            <div class="header-btn">
                <h1>Sistema de Capturación de Contratos</h1>
            </div>

            <div class="wizard-container">
                <div class="wizard-header">
                    <p class="wizard-subtitle">Siga los siguientes pasos para realizar su operación.</p>
                </div>

                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" id="progress"></div>
                    </div>

                    <div class="step-indicators">
                        <div class="step active" id="step-1">
                            <i class="fas fa-user"></i>
                            <span class="step-label">Elección de
                                <br>Función</span>
                        </div>
                        <div class="step" id="step-2">
                            <i class="fas fa-cog"></i>
                            <span class="step-label">Llenado de Formulario</span>
                        </div>
                        <div class="step" id="step-3">
                            <i class="fas fa-check"></i>
                            <span class="step-label">Guardado</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-container">
                <div class="wizard-body">
                    <section class="form-section">
                        <h2 class="section-title"><i class="fas fa-pen-to-square"></i> Datos del Contrato</h2>
                        <form id="contractForm">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="contractNumber" class="required"><i class="fas fa-hashtag"></i> Núm.
                                        Contrato</label>
                                    <input type="text" id="contractNumber" required>
                                </div>
                                <div class="form-group">
                                    <label for="providerId" class="required"><i class="fas fa-id-card"></i> Prov
                                        ID</label>
                                    <input type="text" id="providerId" required>
                                </div>
                                <div class="form-group">
                                    <label for="provider" class="required"><i class="fas fa-building"></i>
                                        Proveedor</label>
                                    <input type="text" id="provider" required>
                                </div>
                                <div class="form-group full-width">
                                    <label for="description" class="required"><i class="fas fa-file-alt"></i>
                                        Descripción</label>
                                    <textarea id="description" rows="3" required></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="initialAmount" class="required"><i class="fas fa-dollar-sign"></i> Monto
                                        Ini</label>
                                    <input type="number" id="initialAmount" min="0" step="0.01" required>
                                </div>
                                <div class="form-group">
                                    <label for="amount" class="required"><i class="fas fa-money-bill-wave"></i>
                                        Importe</label>
                                    <input type="number" id="amount" min="0" step="0.01" required>
                                </div>
                                <div class="form-group">
                                    <label for="fund" class="required"><i class="fas fa-piggy-bank"></i> Fondo</label>
                                    <select id="fund" required>
                                        <option value="">Seleccione un Fondo</option>
                                        <option value="MHA">MHA</option>
                                        <option value="Genshin">Genshin Impact</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="contractDate" class="required"><i class="fas fa-calendar"></i> Fecha
                                        Contrato</label>
                                    <input type="date" id="contractDate" required>
                                </div>
                                <div class="form-group">
                                    <label for="endDate"><i class="fas fa-calendar-times"></i> Fecha Terminación</label>
                                    <input type="date" id="endDate">
                                </div>
                                <div class="form-group">
                                    <label for="status" class="required"><i class="fas fa-toggle-on"></i> Estado</label>
                                    <select id="status" required>
                                        <option value="">Seleccione un Estado</option>
                                        <option value="Activo">Activo</option>
                                        <option value="Terminado">Terminado</option>
                                        <option value="Cancelado">Cancelado</option>
                                        <option value="En proceso">En proceso</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="label" class="required"><i class="fas fa-keyboard"></i> Etiqueta</label>
                                    <input type="number" id="label" min="0" required>
                                </div>
                                <div class="form-group">
                                    <label for="type" class="required"><i class="fas fa-tag"></i> Tipo</label>
                                    <select id="type" required>
                                        <option value="">Seleccione un Tipo</option>
                                        <option value="Servicio">Servicio</option>
                                        <option value="Producto">Producto</option>
                                        <option value="Licencia">Licencia</option>
                                        <option value="Mantenimiento">Mantenimiento</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="type1" class="required"><i class="fas fa-keyboard"></i> Tipo 1</label>
                                    <select id="type1">
                                        <option value="">Seleccione un Tipo</option>
                                        <option value="Servicio">Servicio</option>
                                        <option value="Producto">Producto</option>
                                        <option value="Licencia">Licencia</option>
                                        <option value="Mantenimiento">Mantenimiento</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="type2" class="required"><i class="fas fa-keyboard"></i> Tipo 2</label>
                                    <select type="text" id="type2">
                                        <option value="">Seleccione un Tipo</option>
                                        <option value="Servicio">Servicio</option>
                                        <option value="Producto">Producto</option>
                                        <option value="Licencia">Licencia</option>
                                        <option value="Mantenimiento">Mantenimiento</option>
                                    </select>
                                </div>
                            </div>

                            <div class="btn-container">
                                <button type="submit" id="btnGuardar" class="btn-guardar"><i class="fas fa-save"></i>
                                    Guardar
                                    Contrato</button>
                                <button type="reset" id="btnLimpiar" class="btn-limpiar"><i class="fas fa-eraser"></i>
                                    Limpiar
                                    Campos</button>
                                <!--WIZARD-->
                                <button style="display: none;" class="btn btn-prev" onclick="prevStep('dark')">
                                    <i class="fas fa-arrow-left"></i> Anterior
                                </button>
                                <button style="display: none;" class="btn btn-next" onclick="nextStep('dark')">
                                    Siguiente <i class="fas fa-arrow-right"></i>
                                </button>
                                <button style="display: none;" class="btn btn-submit" onclick="submitForm('dark')">
                                    <i class="fas fa-check"></i> Completar
                                </button>
                                <!--WIZARD-->
                            </div>
                        </form>
                    </section>

                    <!--Tabla dinamica de Proveedores-->
                    <div id="proveedorModal" class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h2 class="section-title"><i class="fas fa-truck"></i> Listado de Proveedores</h2>
                                <span class="close-btn">&times;</span>
                            </div>
                            <p class="modal-txt">Haga clic en el proveedor deseado para que sus datos se llenen
                                automáticamente en el formulario.</p>
                            <!--class="proveedores-panel"-->
                            <div class="modal-body">
                                <div class="container-proveedor" id="proveedoresTableContainer"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="footer">
                <p>© 2025 Sistema Municipal. Todos los derechos reservados.</p>
            </div>
        </div>

        <!--Contenedor de imágenes-->
        <div class="dgic-container">
            <img src="{% static 'img/Tesoreria.png' %}" alt="Tesorería">
            <img class="big" src="{% static 'img/Juarez.png' %}" alt="Juázres Conectado">
            <p><span>Desarrollado por:</span>
                <img src="{% static 'img/Dirección.png' %}" alt="DGIC">
            </p>
        </div>
        <br>
    </div>

    <!--Script = JS-->
    <script src="{% static 'js/captura_contrato.js' %}"></script>
</body>

</html>